$(function(){function playVideo(){video.play(),trackPlayProgress()}function pauseVideo(){video.pause(),stopTrackingPlayProgress()}function trackPlayProgress(){playProgressInterval=setInterval(updatePlayProgress,33)}function stopTrackingPlayProgress(){clearInterval(playProgressInterval)}function updatePlayProgress(){progressBar.value=video.currentTime/video.duration*100,scrubber.style.left=progressBar.value/100*progressBarWidth+"px"}function setPlayProgress(clickX){var newValue=Math.max(0,Math.min(1,(clickX-findPosX(progressBar))/progressBarWidth));video.currentTime=newValue*video.duration,progressBar.value=newValue*progressBarWidth/6.4}function findPosX(obj){for(var curleft=obj.offsetLeft;obj=obj.offsetParent;)curleft+=obj.offsetLeft;return curleft}var video=document.body.getElementsByTagName("VIDEO")[0],progressBar=document.body.getElementsByTagName("PROGRESS")[0],scrubber=document.body.getElementsByClassName("scrubber")[0],progressBarWidth=progressBar.offsetWidth,markers=document.body.getElementsByClassName("markers")[0];markers.addEventListener("mousedown",function(e){trackPlayProgress(),setPlayProgress(e.pageX),scrubber.style.left=progressBar.value/100*progressBarWidth+"px"}),progressBar.addEventListener("mousedown",function(e){trackPlayProgress(),setPlayProgress(e.pageX),scrubber.style.left=progressBar.value/100*progressBarWidth+"px"}),progressBar.addEventListener("mousedown",function(e){stopTrackingPlayProgress(),video.paused?videoWasPlaying=!1:(videoWasPlaying=!0,video.pause()),document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,videoWasPlaying&&(video.play(),trackPlayProgress())}},!0),$(".scrubber").draggable({axis:"x",containment:".progress-bar",scroll:!1,start:function(){video.paused?videoWasPlaying=!1:(videoWasPlaying=!0,video.pause())},drag:function(e){setPlayProgress(e.pageX)},stop:function(){videoWasPlaying&&(video.play(),trackPlayProgress())}}),$(".play").click(function(){playVideo()}),$(".pause").click(function(){pauseVideo()})});